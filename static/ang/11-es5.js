!function(){function t(e,n){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,n)}function e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,c=i(t);if(e){var r=i(this).constructor;o=Reflect.construct(c,arguments,r)}else o=c.apply(this,arguments);return n(this,o)}}function n(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{PgJR:function(n,i,c){"use strict";c.r(i),c.d(i,"EmployeeModule",(function(){return U}));var a,s=c("PCNd"),u=c("tyNb"),p=c("fXoL"),l=((a=function(){function t(){o(this,t)}return r(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=p.Kb({type:a,selectors:[["employee-home"]],decls:2,vars:0,template:function(t,e){1&t&&(p.Wb(0,"p"),p.Gc(1,"home works!"),p.Vb())},styles:[""]}),a),f=c("wd/R"),d=c("eJuo"),b=c("eIep"),m=c("lJxs"),h=c("vyqY"),y=c("YZpF"),v=c("r32Y"),D=c("kt0X"),g=c("ofXK"),k=c("Nls1"),w=c("3Pt+"),O=c("iadO");function M(t,e){if(1&t){var n=p.Xb();p.Wb(0,"div",17),p.Wb(1,"p"),p.Gc(2),p.Vb(),p.Wb(3,"div",18),p.ec("click",(function(){p.yc(n);var t=e.$implicit;return p.ic().emitDate(t)})),p.Wb(4,"div",19),p.Gc(5),p.Vb(),p.Vb(),p.Vb()}if(2&t){var i=e.$implicit,o=p.ic();p.Db(2),p.Hc(i.format("ddd").toUpperCase()),p.Db(1),p.Hb("bg-primary",o.isCurrent(i)),p.Db(2),p.Ic(" ",i.format("DD")," ")}}function V(t,e){if(1&t){var n=p.Xb();p.Ub(0),p.Wb(1,"button",20),p.ec("click",(function(){p.yc(n);var t=p.ic();return t.add.emit(t.currentDate)})),p.Gc(2," New appointment "),p.Vb(),p.Rb(3,"hr"),p.Tb()}}var W,C=((W=function(){function t(){o(this,t),this.updateCurrent=new p.o,this.add=new p.o}return r(t,[{key:"ngOnInit",value:function(){this.timeSpan=this.isMobile?2:3,this.startDate=f().utc().startOf("day").subtract(this.timeSpan,"day"),this.endDate=f().utc().startOf("day").add(this.timeSpan,"day")}},{key:"dates",value:function(){for(var t=[],e=f.utc(this.startDate.toISOString());e.isBefore(this.endDate)||e.isSame(this.endDate);)t.push(f.utc(e.toISOString())),e=e.clone().add(1,"day");return t}},{key:"isCurrent",value:function(t){return this.currentDate.format("DDMMYYYY")===t.format("DDMMYYYY")}},{key:"emitDate",value:function(t){this.updateCurrent.emit(t),t.isAfter(this.endDate)&&(this.startDate=t,this.endDate=f.utc(t.toISOString()).add(2*this.timeSpan,"day")),t.isBefore(this.startDate)&&(this.startDate=f.utc(t.toISOString()).subtract(2*this.timeSpan,"day"),this.endDate=t)}},{key:"nextDay",value:function(){this.emitDate(this.currentDate.clone().add(1,"day"))}},{key:"previousDay",value:function(){this.emitDate(this.currentDate.clone().subtract(1,"day"))}},{key:"availability",value:function(){var t=Object(k.c)(this.employee.scheduleModel,this.currentDate);return t.frames.length>0?t.frames.map((function(t){return t.name})).reduce((function(t,e){return t+" | "+e})):"No Availability"}}]),t}()).\u0275fac=function(t){return new(t||W)},W.\u0275cmp=p.Kb({type:W,selectors:[["employee-schedule-page-header"]],inputs:{currentDate:"currentDate",appointments:"appointments",permissions:"permissions",employee:"employee",isMobile:"isMobile"},outputs:{updateCurrent:"updateCurrent",add:"add"},decls:25,vars:9,consts:[[1,"row"],[1,"col-12","h4","text-center"],[1,"col-12"],[1,"d-flex","c-primary","h3","text-center","mr-4","ml-4"],[1,"fa","fa-chevron-left","c-pointer",3,"click"],[1,"w-100"],[1,"fa","fa-chevron-right","c-pointer",3,"click"],[1,"d-flex","h4","text-center"],["class","date-box",4,"ngFor","ngForOf"],[1,"col-12","h5","text-center"],[1,"c-pointer",3,"click"],[1,"fa","fa-calendar","mr-2"],[1,"visually-hidden"],[3,"ngModel","matDatepicker","ngModelChange","click"],[3,"touchUi"],["dp",""],[4,"ngIf"],[1,"date-box"],[1,"day-round","c-pointer",3,"click"],[1,"inner"],[1,"btn","btn-primary",3,"click"]],template:function(t,e){if(1&t){var n=p.Xb();p.Wb(0,"div",0),p.Wb(1,"div",1),p.Gc(2),p.Vb(),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Wb(5,"i",4),p.ec("click",(function(){return e.previousDay()})),p.Vb(),p.Wb(6,"span",5),p.Gc(7),p.Vb(),p.Wb(8,"i",6),p.ec("click",(function(){return e.nextDay()})),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"div",2),p.Wb(10,"div",7),p.Ec(11,M,6,4,"div",8),p.Vb(),p.Rb(12,"hr"),p.Vb(),p.Wb(13,"div",9),p.Wb(14,"div",10),p.ec("click",(function(){return p.yc(n),p.vc(20).open()})),p.Rb(15,"i",11),p.Gc(16),p.Vb(),p.Wb(17,"div",12),p.Wb(18,"input",13),p.ec("ngModelChange",(function(t){return e.emitDate(t)}))("click",(function(){return p.yc(n),p.vc(20).open()})),p.Vb(),p.Vb(),p.Rb(19,"mat-datepicker",14,15),p.Rb(21,"hr"),p.Gc(22),p.Rb(23,"hr"),p.Ec(24,V,4,0,"ng-container",16),p.Vb(),p.Vb()}if(2&t){var i=p.vc(20);p.Db(2),p.Ic(" ",e.employee.name," "),p.Db(5),p.Hc(e.currentDate.format("MMMM YYYY")),p.Db(4),p.oc("ngForOf",e.dates()),p.Db(5),p.Ic(" ",e.currentDate.format("dddd, DD MMMM YYYY")," "),p.Db(2),p.oc("ngModel",e.currentDate)("matDatepicker",i),p.Db(1),p.oc("touchUi",e.isMobile),p.Db(3),p.Ic(" ",e.availability()," "),p.Db(2),p.oc("ngIf",e.permissions.add)}},directives:[g.k,w.c,O.d,w.n,w.q,O.c,g.l],styles:["[_nghost-%COMP%]{display:block;position:-webkit-sticky;position:sticky;background-color:#fafafa;top:0;left:0;z-index:3}.date-box[_ngcontent-%COMP%]{flex:1}.pretty-scroll[_ngcontent-%COMP%]{overflow-y:scroll;max-height:30rem}.day-round[_ngcontent-%COMP%]{position:relative;margin:auto;width:4rem;height:4rem;border-radius:2rem}.inner[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]}),W),I=c("Xa2L"),x=c("Qu3c");function j(t,e){if(1&t){var n=p.Xb();p.Wb(0,"p"),p.Wb(1,"i",11),p.ec("click",(function(){return p.yc(n),p.ic().edit()})),p.Vb(),p.Vb()}}var E,R=((E=function(){function t(e){o(this,t),this.store=e}return r(t,[{key:"customerDetails",value:function(){return this.appointment.customer.email+"\n"+this.appointment.customer.phone}},{key:"edit",value:function(){this.store.dispatch(h.b.openAppointmentEventDialog({id:this.appointment.id,employeeMode:!0}))}}]),t}()).\u0275fac=function(t){return new(t||E)(p.Qb(D.h))},E.\u0275cmp=p.Kb({type:E,selectors:[["employee-schedule-appointment"]],inputs:{appointment:"appointment",showEdit:"showEdit"},decls:17,vars:7,consts:[[1,"schedule-appointment-container"],[1,"row"],[1,"col-2","text-center","m-auto","c-medium-gray"],[4,"ngIf"],[1,"col-6","m-auto"],[1,"m-auto"],[1,"col-4","c-medium-gray"],[1,"fa","fa-clock","c-primary","mr-2"],[1,"c-primary",3,"matTooltip","matTooltipClass"],[1,"fa","fa-address-card","mr-2"],[1,"col-12"],[1,"fa","fa-pen","c-primary","c-pointer",3,"click"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"div",1),p.Wb(2,"div",2),p.Gc(3),p.Ec(4,j,2,0,"p",3),p.Vb(),p.Wb(5,"div",4),p.Wb(6,"p",5),p.Gc(7),p.Vb(),p.Vb(),p.Wb(8,"div",6),p.Wb(9,"p"),p.Rb(10,"i",7),p.Gc(11),p.Vb(),p.Wb(12,"p",8),p.Rb(13,"i",9),p.Gc(14),p.Vb(),p.Vb(),p.Wb(15,"div",10),p.Rb(16,"hr"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ic(" ",e.appointment.start.format("HH:mm")," "),p.Db(1),p.oc("ngIf",e.showEdit),p.Db(3),p.Ic(" ",e.appointment.service.name," "),p.Db(4),p.Ic(" ",e.appointment.service.duration," "),p.Db(1),p.oc("matTooltip",e.customerDetails())("matTooltipClass","tooltip-ws"),p.Db(2),p.Ic("",e.appointment.customer.name," "))},directives:[g.l,x.a],styles:[".schedule-appointment-container[_ngcontent-%COMP%]{font-weight:600;margin:0 15px}p[_ngcontent-%COMP%]{margin:0}"]}),E);function Y(t,e){1&t&&(p.Wb(0,"div",6),p.Rb(1,"mat-spinner"),p.Vb())}function P(t,e){if(1&t&&(p.Rb(0,"employee-schedule-appointment",8),p.jc(1,"async")),2&t){var n=e.$implicit,i=p.ic(3);p.oc("appointment",n)("showEdit",p.kc(1,2,i.permissions$).change)}}function $(t,e){if(1&t&&(p.Ec(0,P,2,4,"employee-schedule-appointment",7),p.jc(1,"async")),2&t){var n=p.ic(2);p.oc("ngForOf",p.kc(1,1,n.appointments$))}}function S(t,e){if(1&t){var n=p.Xb();p.Wb(0,"div",1),p.Wb(1,"div",2),p.Wb(2,"employee-schedule-page-header",3),p.ec("updateCurrent",(function(t){return p.yc(n),p.ic().updateCurrent(t)}))("add",(function(t){p.yc(n);var i=e.ngIf;return p.ic().openCreateDialog(t,i)})),p.jc(3,"async"),p.jc(4,"async"),p.jc(5,"async"),p.jc(6,"async"),p.Vb(),p.Ec(7,Y,2,0,"div",4),p.jc(8,"async"),p.Ec(9,$,2,3,"ng-template",null,5,p.Fc),p.Vb(),p.Vb()}if(2&t){var i=e.ngIf,o=p.vc(10),c=p.ic();p.Db(2),p.oc("currentDate",p.kc(3,7,c.currentDate$))("appointments",p.kc(4,9,c.appointments$))("permissions",p.kc(5,11,c.permissions$))("employee",i)("isMobile",p.kc(6,13,c.isMobile$)),p.Db(5),p.oc("ngIf",p.kc(8,15,c.isLoading$))("ngIfElse",o)}}var _,A,G,X,F,T=((A=function(n){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}(c,n);var i=e(c);function c(t){return o(this,c),i.call(this,t)}return r(c,[{key:"ngOnInit",value:function(){var t=this;this.initialize(),this.employee$=this.store.select(y.x),this.appointments$=this.employee$.pipe(Object(b.a)((function(e){return t.store.select(h.d.selectCurrentDateEmployeeAppointments,{employeeId:e.id})}))),this.permissions$=this.store.select(y.v,{model:d.a.modelType}),this.currentDate$=this.store.select(h.d.selectCurrentDate).pipe(Object(m.a)((function(t){return f.utc(t)}))),this.isLoading$=this.store.select(h.d.getIsLoadingEntities)}},{key:"initialize",value:function(){var t=f().utc().startOf("day");this.updateCurrent(t),this.loadAppointments(t)}},{key:"updateCurrent",value:function(t){this.store.dispatch(h.b.setCurrentDate({date:t})),this.loadAppointments(t)}},{key:"loadAppointments",value:function(t){var e={fromDate:f.utc(t).startOf("day"),toDate:f.utc(t).endOf("day")};this.store.dispatch(h.b.requestEntities({params:e}))}},{key:"openCreateDialog",value:function(t,e){this.store.dispatch(h.b.openCreateAppointmentDialog({date:t,employee:e,employeeMode:!0}))}}]),c}(v.a)).\u0275fac=function(t){return new(t||A)(p.Qb(D.h))},A.\u0275cmp=p.Kb({type:A,selectors:[["employee-schedule-page"]],features:[p.Ab],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"schedule-container"],[3,"currentDate","appointments","permissions","employee","isMobile","updateCurrent","add"],["class","d-flex justify-content-center",4,"ngIf","ngIfElse"],["appointments",""],[1,"d-flex","justify-content-center"],[3,"appointment","showEdit",4,"ngFor","ngForOf"],[3,"appointment","showEdit"]],template:function(t,e){1&t&&(p.Ec(0,S,11,17,"div",0),p.jc(1,"async")),2&t&&p.oc("ngIf",p.kc(1,1,e.employee$))},directives:[g.l,C,I.b,g.k,R],pipes:[g.b],styles:[".schedule-container[_ngcontent-%COMP%]{max-width:650px;position:relative}"],changeDetection:0}),A),N=((_=function(){function t(e){o(this,t),this.store=e}return r(t,[{key:"canActivate",value:function(t,e){return this.store.pipe(y.n,Object(m.a)((function(t){return!!t.employee})))}}]),t}()).\u0275fac=function(t){return new(t||_)(p.ac(D.h))},_.\u0275prov=p.Mb({token:_,factory:_.\u0275fac,providedIn:"root"}),_),K=[{path:"home",icon:"home",component:l,canActivate:[N]},{path:"schedule",icon:"book",component:T,canActivate:[N]},{path:"",icon:"",component:T,canActivate:[N]}],H=c("7Qvi"),J=[{path:"",icon:"",component:(G=function t(){o(this,t),this.routes=K},G.\u0275fac=function(t){return new(t||G)},G.\u0275cmp=p.Kb({type:G,selectors:[["employee-dashboard"]],decls:2,vars:1,consts:[[3,"routes"]],template:function(t,e){1&t&&(p.Wb(0,"shared-dashboard-container-shell",0),p.Rb(1,"router-outlet"),p.Vb()),2&t&&p.oc("routes",e.routes)},directives:[H.a,u.g],styles:[""]}),G),children:K}],L=((X=function t(){o(this,t)}).\u0275mod=p.Ob({type:X}),X.\u0275inj=p.Nb({factory:function(t){return new(t||X)},imports:[[u.f.forChild(J)],u.f]}),X),Q=c("QiP+"),U=((F=function t(){o(this,t)}).\u0275mod=p.Ob({type:F}),F.\u0275inj=p.Nb({factory:function(t){return new(t||F)},imports:[[s.a,L,Q.a]]}),F)}}])}();